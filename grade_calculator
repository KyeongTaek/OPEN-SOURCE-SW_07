#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <windows.h>
#pragma warning(disable:4996)

void my_grade();
void put_data();
int timesum(int times, int sum2);
float GPAsum(int grade, int times, float sum);

int main() {

	int a = 0;
	printf("학기별 성적 계산 및 입력 : 1\n");
	printf("나의 성적 확인 및 관리 : 2\n");
	printf("사용하실 기능의 숫자를 입력하시오 : ");
	scanf_s("%d", &a);
	if (a == 1) {
		my_grade();
	}
	else printf("제공되지 않는 기능입니다.");
}
void my_grade() {

	system("cls");
	char arr[20];
	char arr11[12] = { "1학년1학기" };
	char arr12[12] = { "1학년2학기" };
	char arr21[12] = { "2학년1학기" };
	char arr22[12] = { "2학년2학기" };
	char arr31[12] = { "3학년1학기" };
	char arr32[12] = { "3학년2학기" };
	char arr41[12] = { "4학년1학기" };
	char arr42[12] = { "4학년2학기" };
	memset(arr, 0, 5 * sizeof(char));
	printf("입력하실 학기를 선택하세요");
	printf("\nEx)1학년1학기\n");
	printf(">> ");
	scanf("%s", arr);
	if (strcmp(arr, arr11) == 0) {
		system("cls");
		int k = 0;
		printf("■■■■■■■■■■1학년 1학기■■■■■■■■■■\n");
		if (k == 0) {
			printf("아직 입력 결과가 없습니다.\n");
			printf("추가하시려면 1을 입력하세요\n");
			printf("뒤로 가려면 2를 입력하세요\n");
			printf(">> ");
			scanf_s("%d", &k);
			put_data();
		}
		else if (k == 1) {
			printf("%s", "1학년 1학기");
		}
		else printf("오류발생");
	}
}

void put_data() {
	system("cls");
	char name[20][15];
	int grade[20] = { 0, };
	int times[20] = { 0, };
	int major_grade[20] = { 0, };
	int major_times[20] = { 0, };
	int i = 0;
	int count = 0;
	int major = 0;
	float GPA = 0;
	float major_GPA = 0;
	float sum = 0;
	float major_sum = 0;
	int sum2 = 0;
	int major_sum2 = 0;
	while (1)
	{
		char grade1[3];
		memset(grade1, 0, 3 * sizeof(char));
		system("cls");
		printf("학점계산기입니다.\n입력을 모두 하였을경우 1을 입력하여 주십시오.\n");
		printf("종료 ㅡ> 입력 1\n");
		printf("과목명을 입력하여 주십시오 : ");
		scanf("%s", &name[i]);
		if (name[i][0] == '1') break;
		printf("평점을 입력하여 주십시오\n");
		printf("Ex)A+\n");
		printf(">> ");
		scanf("%s", grade1);
		if (strcmp(grade1, "A+") == 0) {

			grade[i] = 1;
		}
		else if (strcmp(grade1, "A0") == 0 || strcmp(grade1, "AO") == 0 || strcmp(grade1, "Ao") == 0) {

			grade[i] = 2;
		}
		else if (strcmp(grade1, "B+") == 0) {

			grade[i] = 3;
		}
		else if (strcmp(grade1, "B0") == 0 || strcmp(grade1, "BO") == 0 || strcmp(grade1, "Bo") == 0) {

			grade[i] = 4;
		}
		else if (strcmp(grade1, "C+") == 0) {

			grade[i] = 5;
		}
		else if (strcmp(grade1, "C0") == 0 || strcmp(grade1, "CO") == 0 || strcmp(grade1, "Co") == 0) {

			grade[i] = 6;
		}
		else if (strcmp(grade1, "D+") == 0) {

			grade[i] = 7;
		}
		else if (strcmp(grade1, "D0") == 0 || strcmp(grade1, "DO") == 0 || strcmp(grade1, "Do") == 0) {

			grade[i] = 8;
		}
		else if (strcmp(grade1, "F") == 0) {
			grade[i] = 9;
		}
		else("Error : Have no return");
		printf("과목의 학점을 입력하시오 : ");
		scanf("%d", &times[i]);
		printf("전공과목일 경우 1 아닐경우 2를 입력하여 주십시오 : ");
		scanf("%d", &major);

		if (major == 1) {
			major_grade[i] = grade[i];
			major_times[i] = times[i];
		}

		sum = GPAsum(grade[i], times[i], sum);
		sum2 = timesum(times[i], sum2);
		if (major == 1)
		{
			major_sum = GPAsum(major_grade[i], major_times[i], major_sum);
			major_sum2 = timesum(major_times[i], major_sum2);
		}
		i++;
		count++;
	}
	system("cls");
	printf("\n입력받은 정보 출력\n");

	for (int i = 0; i < count; i++)
	{
		if (grade[i] == 1) {
			printf("과목명 : %s\n", name[i]);
			printf("A+\n%d\n", grade[i], times[i]);
		}
		else if (grade[i] == 2) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : A0\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 3) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : B+\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 4) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : B0\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 5) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : C+\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 6) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : C0\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 7) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : D+\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 8) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : D0\n학점 : %d\n", grade[i], times[i]);
		}
		else if (grade[i] == 9) {
			printf("과목명 : %s\n", name[i]);
			printf("평점 : F\n학점 : %d\n", grade[i], times[i]);
		}
	}
	printf("\n이수학점 : %d", sum2);
	printf("\nGPA : %.2f", (float)sum / sum2);
	printf("\n전공평점의 합 : %.2f", major_sum);
	printf("\n전공학점의 합 : %d", major_sum2);
	printf("\nmajor GPA : %.2f", (float)major_sum / major_sum2);
}

void my_GPA() {

	int a = 0;
	system("cls");
	printf("입력하실 학기를 입력하십시오 : \n");
	printf("1학년 1학기 : 1\n");
	printf("1학년 2학기 : 2\n");
	printf("2학년 1학기 : 3\n");
	printf("2학년 2학기 : 4\n");
	printf("3학년 1학기 : 5\n");
	printf("3학년 2학기 : 6\n");
	printf("4학년 1학기 : 7\n");
	printf("4학년 2학기 : 8\n");
	scanf("%d", &a);

}

float GPAsum(int grade, int times, float sum) {
	float a;

	switch (grade) {

	case 1:
		a = 4.5;
		break;
	case 2:
		a = 4.0;
		break;
	case 3:
		a = 3.5;
		break;
	case 4:
		a = 3.0;
		break;
	case 5:
		a = 2.5;
		break;
	case 6:
		a = 2.0;
		break;
	case 7:
		a = 1.5;
		break;
	case 8:
		a = 1.0;
		break;
	case 9:
		a = 0;
		break;
	}

	float k = a * times;
	sum = sum + k;

	return sum;
}

int timesum(int times, int sum2) {

	sum2 = sum2 + times;

	return sum2;
}
